{"version":3,"sources":["sidebar/FlowOrder.js","sidebar/parsers/pytorch/PyTorchParser.js","libraries/pytorch.js","sidebar/TabContainer.js","sidebar/Sidebar.js","URLparser.js","DBhandler.js","App.js","serviceWorker.js","index.js"],"names":["getPointName","lib","key","p","name","replace","recursive_getOrder","myKey","order","depth","maxDepth","me","visited","ready","Object","keys","inputs","map","isReady","includes","push","outputs","out_key","getStateNames","states","idx","specTitle","lastUser","target_key","maxIndex","test_key","index","Math","max","getLastUser","length","FlowOrder","flowpoints","n_inputs","specs","title","ref","params","downstreamVisited","statename","needState","console","log","prepPoints","inp_key","PyTorchParser","link","addflatten","msg","Initials","max_l","param_key","i","type","current","val","min","substring","Constructor","steplib","stepmsg","maxL","step","Array","from","Forward","pointcode","SaveLoad","PyTorchModules","input","n_dims","Infinity","dimensions","autoparams","inp","outshape","linear","id","in_features","out_features","bias","out_shape","flatten","features","round","conv1d","in_channels","out_channels","kernel_size","stride","padding","dilation","groups","L_in","L_out","floor","conv2d","H_in","W_in","H_out","W_out","conv3d","D_in","D_out","maxpool1d","return_indices","ceil_mode","maxpool2d","maxpool3d","batchnorm1d","num_features","eps","momentum","affine","track_running_stats","batchnorm2d","batchnorm3d","groupnorm","num_groups","num_channels","instancenorm1d","instancenorm2d","instancenorm3d","rnn","input_size","hidden_size","num_layers","nonlinearity","options","batch_first","dropout","bidirectional","lstm","gru","rnncell","lstmcell","grucell","inplace","dropout2d","dropout3d","alphadropout","elu","alpha","hardshrink","lambd","hardtanh","min_val","max_val","leakyrelu","negative_slope","logsigmoid","prelu","num_parameters","init","relu","relu6","rrelu","lower","upper","selu","celu","sigmoid","softplus","beta","threshold","softshrink","softsign","tanh","tanhshrink","value","softmin","dim","softmax","softmax2d","logsoftmax","TabContainer","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","undefined","tab","tabs","indexOf","_this2","classes","width","ceil","react_default","a","createElement","className","root","style","overflow","Tabs_default","onChange","e","setState","onSelectTab","textColor","tabsRoot","indicator","tabsIndicator","scrollButtons","Tab_default","disableRipple","tabRoot","selected","tabSelected","label","React","Component","withStyles","theme","flexGrow","borderBottom","backgroundColor","textTransform","minWidth","fontWeight","typography","fontWeightRegular","marginRight","spacing","unit","fontFamily","join","&:hover","color","opacity","&$tabSelected","&:focus","htmlToImage","require","darktheme","createMuiTheme","palette","useNextVariants","lighttheme","github","hljs","background","themes","SettingsTab","env","environment","marginTop","FormControl_default","InputLabel_default","htmlFor","Select_default","library","inputProps","refresh","target","updateEnv","libraries","libname","MenuItem_default","paddingTop","paddingBottom","paddingRight","settings","updateSettings","themename","variant","varname","r","t","tmp","FormControlLabel_default","control","Switch_default","checked","Button_default","onClick","toPng","diagramRef","then","dataUrl","Image","src","document","download","href","click","CodeTab","codetheme","atelierForestDark","fontSize","default_highlight","language","showLineNumbers","code","FlowpointTab","point","fields","int","double","bool","tuple","select","TextField_default","margin","splice","updatePointSettings","paramkey","param","opt_val","opt_idx","modules","getModules","title2key","mod_key","IconButton_default","aria-label","red","marginLeft","deleteSelected","Delete_default","display","height","verticalAlign","textAlign","Sidebar","styles","Drawer_default","anchor","open","class","maxWidth","drawerWidth","Typography_default","gutterBottom","component","position","right","top","fa","sidebar_TabContainer","Sidebar_SettingsTab","Sidebar_CodeTab","Sidebar_FlowpointTab","lvls","0","1","2","3","num2string","num","toString","string2num","str","parseInt","decodeParams","queries","split","sort","pkey","q","pval","pidx","decodeOutputs","pos2title","l","b","query","output","encodePoint","pos","x","y","encodeOutputs","encodeParams","parseFromQuery","key2lib","P","showName","showSidebar","count","id2key","point_query","newpoint","output_shape","isHover","decodePoint","postToDB","content","cb","mod_id","d","Date","n","getSeconds","getMonth","getYear","getHours","getMinutes","random","getId","url","axios","get","res","ReplaceAll","search","replacement","newstr","App","lastPos","current_url","showShape","avoidCollisions","snackshow","snackmsg","snackcolor","green","modelUrl","baseUrl","window","location","addFlowpoint","bind","assertThisInitialized","handleClickPoint","prepCode","prepOutputShapes","blue","data","newlib","feed","entry","err","parser","_this3","bestInp","_this4","shiftKey","p1","handleClickLine","_this5","Sidebar_Sidebar","dist","getDiagramRef","transition","snap","startPosition","onDrag","maxHeight","shape","shapeBox","bottom","left","Fab_default","lightBlue","zIndex","boxShadow","Add_default","copy","FileCopy_default","indigo","new_url","showNames","paper","outlined","filled","parseToQuery","Link_default","deepPurple","Menu_default","Snackbar_default","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","SnackbarContent_default","message","Boolean","hostname","match","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.8f52e6c2.chunk.js","sourcesContent":["import React from 'react';\n\n\nexport function getPointName(lib, key) {\n  const p = lib[key]\n  return (p.name === '' ? ('p_' + key) : p.name).replace(/ /g, '_')\n}\n\n\nfunction prepPoints(flowpoints) {\n\n  // Helpers\n  var n_inputs = 0\n  var lib = {}\n\n  // Adding all keys to lib\n  Object.keys(flowpoints).map(key => {\n    const p = flowpoints[key];\n    lib[key] = {\n      specTitle: p.specs.title,\n      inputs: {},\n      outputs: {},\n      name: p.name,\n      ref: p.specs.ref,\n      params: p.specs.params,\n      index: null,\n      visited: false,\n      downstreamVisited: false,\n      ready: false,\n      statename: null,\n      needState: false,\n    }\n    if (p.specs.title === 'Input') {\n      lib[key].index = n_inputs;\n      lib[key].ready = true;\n      lib[key].statename = (p.name === '' ? ('input_' + n_inputs) : p.name);\n      n_inputs = n_inputs + 1\n    }\n  })\n\n  // Adding connection pointers\n  Object.keys(flowpoints).map(key => {\n    var p = lib[key];\n    Object.keys(flowpoints[key].outputs).map(out_key => {\n      p.outputs[out_key] = lib[out_key]\n      if (!(out_key in lib)) {\n        console.log(out_key, lib)\n      } else {\n        lib[out_key].inputs[key] = lib[key]\n      }\n    })\n  })\n\n  // Returning\n  return lib\n\n}\n\n\n\nfunction recursive_isDownStream(lib, targetKey, myKey, depth, maxDepth) {\n\n  // Returning if matching\n  if (targetKey === myKey) return true\n\n  // Marking self as visited on this run\n  lib[myKey].downstreamVisited = true;\n\n  // Helper\n  var isDone = false;\n\n  // Testing outputs\n  if (depth < maxDepth) {\n    lib[myKey].outputs.map(out_key => {\n      if (!isDone && !lib[out_key].downstreamVisited) {\n        isDone = recursive_isDownStream(lib, targetKey, out_key, depth + 1, maxDepth);\n      }\n    })\n  }\n\n  // Returning\n  return isDone\n\n}\n\n\nfunction isDownStream(lib, targetKey, myKey) {\n\n  // Prepping lib\n  Object.keys(lib).map(key => {\n    lib[key].downstreamVisited = false;\n  })\n\n  // Testing\n  const isDone = recursive_isDownStream(lib, targetKey, myKey, 0, 100)\n\n  // Returning\n  return isDone\n\n}\n\n\nfunction isReady(lib, myKey) {\n  var ready = true;\n  Object.keys(lib[myKey].inputs).map(key => {\n    if (!lib[key].ready) ready = false\n  })\n  return ready\n}\n\n\nfunction recursive_getOrder(lib, myKey, order, depth, maxDepth) {\n\n  // Helper\n  var me = lib[myKey]\n\n  if (me) {\n    // Visited before? -> Return\n    if (me.visited) return order\n\n    // All inputs ready?\n    me.ready = isReady(lib, myKey)\n\n    // Visiting and continuing recursion downstream\n    if (me.ready) {\n      me.visited = true;\n      if (!order.includes(myKey)) order.push(myKey)\n      Object.keys(me.outputs).map(out_key => {\n        order = recursive_getOrder(lib, out_key, order, depth + 1, maxDepth)\n      })\n    }\n  }\n\n  // Returning\n  return order\n\n}\n\n\nfunction getLastUser(lib, order, target_key) {\n  var maxIndex = -1;\n  order.map((test_key, index) => {\n    if (target_key in lib[test_key].inputs) maxIndex = Math.max(maxIndex, index);\n  })\n  return order[maxIndex]\n}\n\n\nfunction getStateNames(lib, order) {\n  var states = {};\n  order.map((key, idx) => {\n    const p = lib[key];\n    if (!(key in states)) {\n      states[key] = getPointName(lib, key) + (p.specTitle === 'Input' ? '' : '_state');\n    }\n    const lastUser = getLastUser(lib, order, key);\n    if (lastUser) {\n      states[lastUser] = states[key]\n    }\n  })\n  states[order[order.length - 1]] = 'self.state'\n  return states\n}\n\n\nexport function FlowOrder(flowpoints) {\n\n  // Helpers\n  var order = []\n  var inputs = {}\n  var states = {}\n\n  // Prepping\n  var lib = prepPoints(flowpoints)\n\n  // Getting inputs\n  Object.keys(lib).map(key => {\n    if (lib[key].ready) {\n      order.push(key)\n      inputs[key] = lib[key];\n    }\n  })\n\n  // Testing inputs and downstream\n  Object.keys(inputs).map(inp_key => {\n    order = recursive_getOrder(lib, inp_key, order, 0, 100)\n  })\n\n  // Inputs always have their own states\n  var states = getStateNames(lib, order);\n\n  // Returning\n  return { lib:lib, order:order, states:states, inputs:Object.keys(inputs) }\n\n}\n","import React, { Component } from 'react';\n\nimport { getPointName } from '../../FlowOrder.js';\n\n\nfunction Initials(link) {\n  var msg = \"'''\"\n  msg += \"\\nCreated with https://mariusbrataas.github.io/flowpoints_ml/\"\n  if (link) {\n    msg += \"\\n\\nLink to model:\\n\" + link\n  }\n  msg += \"\\n\\nLICENSE:\"\n  msg += \"\\nhttps://github.com/mariusbrataas/flowpoints_ml/blob/master/LICENSE\"\n  msg += \"\\n'''\"\n  return msg\n}\n\n\nfunction Imports() {\n  var msg = \"# Importing torch tools\"\n  msg += \"\\nimport torch\"\n  msg += \"\\nfrom torch import nn, optim, cuda\"\n  msg += \"\\n\\n\"\n  msg += \"\\n# Importing other libraries\"\n  msg += \"\\nimport numpy as np\"\n  msg += \"\\nimport matplotlib.pyplot as plt\"\n  msg += \"\\nimport time\"\n  return msg\n}\n\n\nfunction Constructor(flowpoints, order) {\n\n  // Basics\n  var msg = \"# Model\"\n  msg += \"\\nclass neural_net(nn.Module):\"\n  msg += \"\\n\\n\\n    def __init__(self, optimizer=optim.SGD, alpha=0.01, criterion=nn.CrossEntropyLoss(), use_cuda=None):\"\n  msg += \"\\n\\n        # Basics\"\n  msg += \"\\n        super(neural_net, self).__init__()\"\n  msg += \"\\n\\n        # Settings\"\n  msg += \"\\n        self.optim_type = optimizer\"\n  msg += \"\\n        self.optimizer  = None\"\n  msg += \"\\n        self.alpha      = alpha\"\n  msg += \"\\n        self.criterion  = criterion\"\n  msg += \"\\n\\n        # Use CUDA?\"\n  msg += \"\\n        self.use_cuda = use_cuda if (use_cuda != None and cuda.is_available()) else cuda.is_available()\"\n  msg += \"\\n\\n        # Current loss and loss history\"\n  msg += \"\\n        self.train_loss      = 0\"\n  msg += \"\\n        self.valid_loss      = 0\"\n  msg += \"\\n        self.train_loss_hist = []\"\n  msg += \"\\n        self.valid_loss_hist = []\"\n  msg += \"\\n\\n        # State\"\n  msg += \"\\n        self.state = None\"\n\n  // Initializing modules\n  msg += \"\\n\\n        # Adding all modules\"\n  order.map(key => {\n    var p = flowpoints[key];\n    if (p.specs.title !== 'Input') {\n\n      // Getting longest param name\n      var max_l = 0;\n      Object.keys(p.specs.params).map(param_key => {max_l = Math.max(param_key.length, max_l)})\n\n      // Init object\n      msg += \"\\n        self.\" + getPointName(flowpoints, key) + \" = \" + p.specs.ref + '('\n\n      // Adding arguments\n      Object.keys(p.specs.params).map(param_key => {\n        msg += \"\\n            \" + param_key\n        for (var i = 0; i < max_l - param_key.length; i++) msg += ' '\n        msg += ' = '\n        if (p.specs.params[param_key].type === 'tuple') {\n          msg += '('\n          p.specs.params[param_key].current.map(val => {msg += (val === '' ? p.specs.params[param_key].min : val) + ','})\n          msg = msg.substring(0, msg.length - 1) + '),'\n        } else if (p.specs.params[param_key].type === 'select') {\n          msg += \"'\" + (p.specs.params[param_key].current === '' ? p.specs.params[param_key].min : p.specs.params[param_key].current) + \"'\" + ','\n        } else {\n          msg += (p.specs.params[param_key].current === '' ? p.specs.params[param_key].min : p.specs.params[param_key].current) + ','\n        }\n      })\n      if (max_l > 0) msg += '\\n        '\n      msg += ')'\n    }\n  })\n\n  // Startup routines\n  msg += \"\\n\\n        # Running startup routines\"\n  msg += \"\\n        self.startup_routines()\"\n\n  // Returning\n  return msg\n\n}\n\n\n\nfunction StartupRoutines() {\n  var msg = \"    def startup_routines(self):\"\n  msg += \"\\n        self.optimizer = self.optim_type(self.parameters(), lr=self.alpha)\"\n  msg += \"\\n        if self.use_cuda:\"\n  msg += \"\\n            self.cuda()\"\n  return msg\n}\n\n\n\nfunction Predict() {\n  var msg = \"    def predict(self, x):\"\n  msg += \"\\n        \"\n  msg += \"\\n        # Switching off auto-grad\"\n  msg += \"\\n        with torch.no_grad():\"\n  msg += \"\\n            \"\n  msg += \"\\n            # Use CUDA?\"\n  msg += \"\\n            if self.use_cuda:\"\n  msg += \"\\n                x = x.cuda()\"\n  msg += \"\\n            \"\n  msg += \"\\n            # Running inference\"\n  msg += \"\\n            return self.forward(x)\"\n  return msg\n}\n\n\n\nfunction Forward(lib, states, order, inputs) {\n  var msg = \"    def forward(self, \"\n\n  // Adding inputs\n  inputs.map(key => { msg += states[key] + ', ' })\n  if (inputs.length > 0) msg = msg.substring(0, msg.length - 2)\n  msg += '):'\n\n  // Forwarding\n  var steplib = []\n  order.map(key => {\n    const p = lib[key];\n    if (!(p.specTitle === 'Input')) {\n      var stepmsg = \"        \" + states[key] + ' = '\n      stepmsg += 'self.' + getPointName(lib, key) + '('\n      Object.keys(p.inputs).map(inp_key => { stepmsg += states[inp_key] + ' + ' })\n      stepmsg = stepmsg.substring(0, stepmsg.length - 3) + ')'\n      steplib.push({msg:stepmsg, title:p.specTitle})\n    }\n  })\n\n  // Adding steps\n  var maxL = 0\n  steplib.map(step => {maxL = Math.max(maxL, step.msg.length)})\n  steplib.map(step => {\n    msg += '\\n' + step.msg\n    Array.from(Array(maxL + 1 - step.msg.length).keys()).map(idx => {msg += ' '})\n    msg += '# ' + step.title\n  })\n\n  // Adding return\n  msg += '\\n        return self.state'\n\n  // Returning\n  return msg\n\n}\n\n\nfunction FitStep() {\n  var msg = \"    def fit_step(self, train_loader):\"\n  msg += '\\n\\n        # Preparations for fit step'\n  msg += '\\n        self.train_loss = 0 # Resetting training loss'\n  msg += '\\n        self.train()        # Switching to autograd'\n  msg += '\\n\\n        # Looping through data'\n  msg += '\\n        for x, y in train_loader:'\n  msg += '\\n\\n            # Use CUDA?'\n  msg += '\\n            if self.use_cuda:'\n  msg += '\\n                x, y = x.cuda(), y.cuda()        # Moving tensors to GPU'\n  msg += '\\n\\n            # Performing calculations'\n  msg += '\\n            self.forward(x)                      # Forward pass'\n  msg += '\\n            loss = self.criterion(self.state, y) # Calculating loss'\n  msg += '\\n            self.train_loss += loss.item()       # Adding to epoch loss'\n  msg += '\\n            loss.backward()                      # Backward pass'\n  msg += '\\n            self.optimizer.step()                # Optimizing weights'\n  msg += '\\n            self.optimizer.zero_grad()           # Clearing gradients'\n  msg += '\\n\\n        # Adding loss to history'\n  msg += '\\n        self.train_loss_hist.append(self.train_loss / len(train_loader))'\n\n  // Returning\n  return msg\n}\n\n\nfunction ValidationStep() {\n  var msg = \"    def validation_step(self, validation_loader):\"\n  msg += '\\n\\n        # Preparations for validation step'\n  msg += '\\n        self.valid_loss = 0 # Resetting validation loss'\n  msg += '\\n\\n        # Swithing off autograd'\n  msg += '\\n        with torch.no_grad():'\n  msg += '\\n\\n            # Looping through data'\n  msg += '\\n            for x, y in validation_loader:'\n  msg += '\\n\\n                # Use CUDA?'\n  msg += '\\n                if self.use_cuda:'\n  msg += '\\n                    x, y = x.cuda(), y.cuda()        # Moving tensors to GPU'\n  msg += '\\n\\n                # Performing calculations'\n  msg += '\\n                self.forward(x)                      # Forward pass'\n  msg += '\\n                loss = self.criterion(self.state, y) # Calculating loss'\n  msg += '\\n                self.valid_loss += loss.item()       # Adding to epoch loss'\n  msg += '\\n\\n        # Adding loss to history'\n  msg += '\\n        self.valid_loss_hist.append(self.valid_loss / len(validation_loader))'\n\n  // Returning\n  return msg\n}\n\n\nfunction Fit() {\n  var msg = '    def fit(self, train_loader, validation_loader=None, epochs=10, show_progress=True, save_best=False):'\n  msg += '\\n\\n        # Helpers'\n  msg += '\\n\\n        best_validation = 1e5'\n  msg += '\\n\\n        # Possibly prepping progress message'\n  msg += '\\n        if show_progress:'\n  msg += '\\n            epoch_l = max(len(str(epochs)), 2)'\n  msg += \"\\n            print('Training model...')\"\n  msg += \"\\n            print('%sEpoch   Training loss   Validation loss   Duration' % ''.rjust(2 * epoch_l - 4, ' '))\"\n  msg += '\\n            t = time.time()'\n  msg += '\\n\\n        # Looping through epochs'\n  msg += '\\n        for epoch in range(epochs):'\n  msg += '\\n            self.fit_step(train_loader)                 # Optimizing weights'\n  msg += '\\n            if validation_loader != None:               # Perform validation?'\n  msg += '\\n                self.validation_step(validation_loader) # Calculating validation loss'\n  msg += '\\n\\n            # Possibly printing progress'\n  msg += '\\n            if show_progress:'\n  msg += \"\\n                print('%s/%s' % (str(epoch + 1).rjust(epoch_l, ' '), str(epochs).ljust(epoch_l, ' ')),\"\n  msg += \"\\n                    '| %s' % str(round(self.train_loss_hist[-1], 8)).ljust(13, ' '),\"\n  msg += \"\\n                    '| %s' % str(round(self.valid_loss_hist[-1], 8)).ljust(15, ' '),\"\n  msg += \"\\n                    '| %ss' % str(round(time.time() - t, 3)).rjust(7, ' '))\"\n  msg += '\\n                t = time.time()'\n  msg += '\\n\\n            # Possibly saving model'\n  msg += '\\n\\n            if save_best:'\n  msg += '\\n                if self.valid_loss_hist[-1] < best_validation:'\n  msg += \"\\n                    self.save('best_validation')\"\n  msg += \"\\n                    best_validation = self.valid_loss_hist[-1]\"\n  msg += '\\n\\n        # Switching to eval'\n  msg += '\\n\\n        self.eval()'\n\n  // Returning\n  return msg\n}\n\n\nfunction PlotHist() {\n  var msg = '    def plot_hist(self):'\n  msg += \"\\n\\n        # Adding plots\"\n  msg += \"\\n        plt.plot(self.train_loss_hist, color='blue', label='Training loss')\"\n  msg += \"\\n        plt.plot(self.valid_loss_hist, color='springgreen', label='Validation loss')\"\n  msg += \"\\n\\n        # Axis labels\"\n  msg += \"\\n        plt.xlabel('Epoch')\"\n  msg += \"\\n        plt.ylabel('Loss')\"\n  msg += \"\\n        plt.legend(loc='upper right')\"\n  msg += \"\\n\\n        # Displaying plot\"\n  msg += \"\\n        plt.show()\"\n\n  // Returning\n  return msg\n}\n\n\nfunction SaveLoad(lib, order) {\n  var msg = \"    def save(self, name='model.pth'):\"\n  msg += \"\\n        if not '.pth' in name: name += '.pth'\"\n  msg += \"\\n        torch.save({\"\n  order.map(key => {\n    const point = lib[key]\n    if (!(point.specTitle === 'Input')) {\n      const pointcode = getPointName(lib, key)\n      msg += \"\\n            '\" + pointcode + \"': self.\" + pointcode + ','\n    }\n  })\n  msg += \"\\n            'train_loss':      self.train_loss,\"\n  msg += \"\\n            'valid_loss':      self.valid_loss,\"\n  msg += \"\\n            'train_loss_hist': self.train_loss_hist,\"\n  msg += \"\\n            'valid_loss_hist': self.valid_loss_hist,\"\n  msg += \"\\n            'optim_type':      self.optim_type,\"\n  msg += \"\\n            'alpha':           self.alpha,\"\n  msg += \"\\n            'criterion':       self.criterion,\"\n  msg += \"\\n            'use_cuda':        self.use_cuda\"\n  msg += \"\\n        }, name)\"\n  msg += \"\\n\\n\\n    @staticmethod\"\n  msg += \"\\n    def load(name='model.pth'):\"\n  msg += \"\\n        if not '.pth' in name: name += '.pth'\"\n  msg += \"\\n        checkpoint = torch.load(name)\"\n  msg += \"\\n        model = neural_net(\"\n  msg += \"\\n            optimizer = checkpoint['optim_type'],\"\n  msg += \"\\n            alpha     = checkpoint['alpha'],\"\n  msg += \"\\n            criterion = checkpoint['criterion'],\"\n  msg += \"\\n            use_cuda  = checkpoint['use_cuda']\"\n  msg += \"\\n        )\"\n  order.map(key => {\n    const point = lib[key]\n    if (!(point.specTitle === 'Input')) {\n      const pointcode = getPointName(lib, key)\n      msg += \"\\n        model.\" + pointcode + \" = checkpoint['\" + pointcode + \"']\"\n    }\n  })\n  msg += \"\\n        model.train_loss      = checkpoint['train_loss']\"\n  msg += \"\\n        model.valid_loss      = checkpoint['valid_loss']\"\n  msg += \"\\n        model.train_loss_hist = checkpoint['train_loss_hist']\"\n  msg += \"\\n        model.valid_loss_hist = checkpoint['valid_loss_hist']\"\n  msg += '\\n        model.startup_routines()'\n  msg += \"\\n        return model\"\n\n  // Returning\n  return msg\n}\n\n\nfunction Flatten() {\n  var msg = '# Helper class for flattening'\n  msg += '\\nclass Flatten(nn.Module):'\n  msg += '\\n    def __init__(self):'\n  msg += '\\n        super(Flatten, self).__init__()'\n  msg += '\\n    def forward(self, x):'\n  msg += '\\n        return x.view(x.shape[0], -1)'\n  return msg\n}\n\n\nexport function PyTorchParser(flowpoints, lib, link) {\n\n  // Add flatten?\n  var addflatten = false;\n  Object.keys(flowpoints).map(key => {\n    if (flowpoints[key].specs.title === 'Flatten') addflatten = true;\n  })\n\n  // Helpers\n  const order = lib.order;\n  const states = lib.states;\n  const inputs = lib.inputs;\n\n  // Initials\n  var msg = Initials(link)\n  msg += '\\n\\n\\n' + Imports();\n\n  // Add flatten?\n  if (addflatten) msg += '\\n\\n\\n' + Flatten()\n\n  // Model\n  msg += '\\n\\n\\n' + Constructor(flowpoints, order, {});\n  msg += '\\n\\n\\n' + StartupRoutines();\n  msg += '\\n\\n\\n' + Predict();\n  msg += '\\n\\n\\n' + Forward(lib.lib, states, order, inputs);\n  msg += '\\n\\n\\n' + FitStep();\n  msg += '\\n\\n\\n' + ValidationStep();\n  msg += '\\n\\n\\n' + Fit();\n  msg += '\\n\\n\\n' + PlotHist();\n  msg += '\\n\\n\\n' + SaveLoad(lib.lib, order);\n\n  // Returning\n  return msg\n\n}\n","import React, { Component } from 'react';\n\nexport function PyTorchModules() {\n  return {\n    input: {\n      title: 'Input',\n      params: {\n        n_dims: { min:1, max:Infinity, current:2 },\n        dimensions: { type:'tuple', min:1, max:Infinity, current:[1,1] }\n      },\n      autoparams: (inp, p) => {\n        return p\n      },\n      outshape: (inp, p) => {\n        return p.dimensions.current\n      }\n    },\n    linear: {\n      title: 'Linear',\n      ref: 'nn.Linear',\n      id: 0,\n      params: {\n        in_features: {type:'int', min:1, max:Infinity, current:1 },\n        out_features: { type:'int', min:1, max:Infinity, current:1 },\n        bias: { type:'bool', current:'True' }\n      },\n      outshape: (inp, p) => {\n        var idx = 0;\n        var out_shape = inp.map((val, index) => {\n          idx = index;\n          return val\n        });\n        out_shape[idx] = p.out_features.current;\n        return out_shape\n      },\n      autoparams: (inp, p) => {\n        p.in_features.current = inp[inp.length - 1]\n        return p\n      }\n    },\n    flatten: {\n      title: 'Flatten',\n      ref: 'Flatten',\n      id: 1,\n      params: {},\n      outshape: (inp, p) => {\n        var features = 1/inp[0]\n        inp.map(val => {features *= val})\n        return [inp[0], Math.round(features)]\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    conv1d: {\n      title: 'Conv1d',\n      ref: 'nn.Conv1d',\n      id: 2,\n      params: {\n        in_channels: { type:'int', min:1, max:Infinity, current:1 },\n        out_channels: { type:'int', min:1, max:Infinity, current:1 },\n        kernel_size: { type:'tuple', min:1, max:Infinity, current:[3] },\n        stride: { type:'tuple', min:1, max:Infinity, current:[1] },\n        padding: { type:'tuple', min:0, max:Infinity, current:[0] },\n        dilation: { type:'tuple', min:1, max:Infinity, current:[1] },\n        groups: { type:'int', min:1, max:Infinity, current:1 },\n        bias: { type: 'bool', current:'True' }\n      },\n      outshape: (inp, p) => {\n        const L_in = inp[2]\n        const L_out = Math.floor(1 + (L_in + 2 * p.padding.current[0] - p.dilation.current[0] * (p.kernel_size.current[0] - 1) - 1) / p.stride.current[0])\n        return [inp[0], p.out_channels.current.current, L_out]\n      },\n      autoparams: (inp, p) => {\n        p.in_channels.current = inp[1]\n        return p\n      }\n    },\n    conv2d: {\n      title: 'Conv2d',\n      ref: 'nn.Conv2d',\n      id: 3,\n      params: {\n        in_channels: { type:'int', min:1, max:Infinity, current:1 },\n        out_channels: { type:'int', min:1, max:Infinity, current:1 },\n        kernel_size: { type:'tuple', min:1, max:Infinity, current:[3, 3] },\n        stride: { type:'tuple', min:1, max:Infinity, current:[1, 1] },\n        padding: { type:'tuple', min:0, max:Infinity, current:[0, 0] },\n        dilation: { type:'tuple', min:1, max:Infinity, current:[1, 1] },\n        groups: { type:'int', min:1, max:Infinity, current:1 },\n        bias: { type: 'bool', current:'True' }\n      },\n      outshape: (inp, p) => {\n        const H_in = inp[2]\n        const W_in = inp[3]\n        const H_out = Math.floor(1 + (H_in + 2 * p.padding.current[0] - p.dilation.current[0] * (p.kernel_size.current[0] - 1) - 1) / p.stride.current[0])\n        const W_out = Math.floor(1 + (W_in + 2 * p.padding.current[1] - p.dilation.current[1] * (p.kernel_size.current[1] - 1) - 1) / p.stride.current[1])\n        return [inp[0], p.out_channels.current, H_out, W_out]\n      },\n      autoparams: (inp, p) => {\n        p.in_channels.current = inp[1]\n        return p\n      }\n    },\n    conv3d: {\n      title: 'Conv3d',\n      ref: 'nn.Conv3d',\n      id: 4,\n      params: {\n        in_channels: { type:'int', min:1, max:Infinity, current:1 },\n        out_channels: { type:'int', min:1, max:Infinity, current:1 },\n        kernel_size: { type:'tuple', min:1, max:Infinity, current:[3, 3, 3] },\n        stride: { type:'tuple', min:1, max:Infinity, current:[1, 1, 1] },\n        padding: { type:'tuple', min:0, max:Infinity, current:[0, 0, 0] },\n        dilation: { type:'tuple', min:1, max:Infinity, current:[1, 1, 1] },\n        groups: { type:'int', min:1, max:Infinity, current:1 },\n        bias: { type: 'bool', current:'True' }\n      },\n      outshape: (inp, p) => {\n        const D_in = inp[2]\n        const H_in = inp[3]\n        const W_in = inp[4]\n        const D_out = Math.floor(1 + (D_in + 2 * p.padding.current[0] - p.dilation.current[0] * (p.kernel_size.current[0] - 1) - 1) / p.stride.current[0])\n        const H_out = Math.floor(1 + (H_in + 2 * p.padding.current[1] - p.dilation.current[1] * (p.kernel_size.current[1] - 1) - 1) / p.stride.current[1])\n        const W_out = Math.floor(1 + (W_in + 2 * p.padding.current[2] - p.dilation.current[2] * (p.kernel_size.current[2] - 1) - 1) / p.stride.current[2])\n        return [inp[0], p.out_channels.current, D_out, H_out, W_out]\n      },\n      autoparams: (inp, p) => {\n        p.in_channels.current = inp[1]\n        return p\n      }\n    },\n    maxpool1d: {\n      title: 'MaxPool1d',\n      ref: 'nn.MaxPool1d',\n      id: 5,\n      params: {\n        kernel_size: { type:'int', min:1, max:Infinity, current:3 },\n        stride: { type:'int', min:1, max:Infinity, current:1 },\n        padding: { type:'int', min:0, max:Infinity, current:0 },\n        dilation: { type:'int', min:1, max:Infinity, current:1 },\n        return_indices: { type: 'bool', current:'False' },\n        ceil_mode: { type: 'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        const L_in = inp[2]\n        const L_out = Math.floor(1 + (L_in + 2 * p.padding.current[0] - p.dilation.current[0] * (p.kernel_size.current[0] - 1) - 1) / p.stride.current[0])\n        return [inp[0], inp[0], L_out]\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    maxpool2d: {\n      title: 'MaxPool2d',\n      ref: 'nn.MaxPool2d',\n      id: 6,\n      params: {\n        kernel_size: { type:'tuple', min:1, max:Infinity, current:[3, 3] },\n        stride: { type:'tuple', min:1, max:Infinity, current:[1, 1] },\n        padding: { type:'tuple', min:0, max:Infinity, current:[0, 0] },\n        dilation: { type:'tuple', min:1, max:Infinity, current:[1, 1] },\n        return_indices: { type: 'bool', current:'False' },\n        ceil_mode: { type: 'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        const H_in = inp[2]\n        const W_in = inp[3]\n        const H_out = Math.floor(1 + (H_in + 2 * p.padding.current[0] - p.dilation.current[0] * (p.kernel_size.current[0] - 1) - 1) / p.stride.current[0])\n        const W_out = Math.floor(1 + (W_in + 2 * p.padding.current[1] - p.dilation.current[1] * (p.kernel_size.current[1] - 1) - 1) / p.stride.current[1])\n        return [inp[0], inp[1], H_out, W_out]\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    maxpool3d: {\n      title: 'MaxPool3d',\n      ref: 'nn.MaxPool3d',\n      id: 7,\n      params: {\n        kernel_size: { type:'tuple', min:1, max:Infinity, current:[3, 3, 3] },\n        stride: { type:'tuple', min:1, max:Infinity, current:[1, 1, 1] },\n        padding: { type:'tuple', min:0, max:Infinity, current:[0, 0, 0] },\n        dilation: { type:'tuple', min:1, max:Infinity, current:[1, 1, 1] },\n        return_indices: { type: 'bool', current:'False' },\n        ceil_mode: { type: 'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        const D_in = inp[2]\n        const H_in = inp[3]\n        const W_in = inp[4]\n        const D_out = Math.floor(1 + (D_in + 2 * p.padding.current[0] - p.dilation.current[0] * (p.kernel_size.current[0] - 1) - 1) / p.stride.current[0])\n        const H_out = Math.floor(1 + (H_in + 2 * p.padding.current[1] - p.dilation.current[1] * (p.kernel_size.current[1] - 1) - 1) / p.stride.current[1])\n        const W_out = Math.floor(1 + (W_in + 2 * p.padding.current[2] - p.dilation.current[2] * (p.kernel_size.current[2] - 1) - 1) / p.stride.current[2])\n        return [inp[0], inp[1], D_out, H_out, W_out]\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    batchnorm1d: {\n      title: 'BatchNorm1d',\n      ref: 'nn.BatchNorm1d',\n      id: 8,\n      params: {\n        num_features: { type:'int', min:1, max:Infinity, current:1 },\n        eps: { type:'double', min:1e-5, max:1, current:1e-5 },\n        momentum: { type:'double', min:0, max:Infinity, current:0.1 },\n        affine: { type: 'bool', current:'True' },\n        track_running_stats: { type: 'bool', current:'True' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        p.num_features.current = inp[1]\n        return p\n      }\n    },\n    batchnorm2d: {\n      title: 'BatchNorm2d',\n      ref: 'nn.BatchNorm2d',\n      id: 9,\n      params: {\n        num_features: { type:'int', min:1, max:Infinity, current:1 },\n        eps: { type:'double', min:1e-5, max:1, current:1e-5 },\n        momentum: { type:'double', min:0, max:Infinity, current:0.1 },\n        affine: { type: 'bool', current:'True' },\n        track_running_stats: { type: 'bool', current:'True' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        p.num_features.current = inp[1]\n        return p\n      }\n    },\n    batchnorm3d: {\n      title: 'BatchNorm3d',\n      ref: 'nn.BatchNorm3d',\n      id: 10,\n      params: {\n        num_features: { type:'int', min:1, max:Infinity, current:1 },\n        eps: { type:'double', min:1e-5, max:1, current:1e-5 },\n        momentum: { type:'double', min:0, max:Infinity, current:0.1 },\n        affine: { type: 'bool', current:'True' },\n        track_running_stats: { type: 'bool', current:'True' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        p.num_features.current = inp[1]\n        return p\n      }\n    },\n    groupnorm: {\n      title: 'GroupNorm',\n      ref: 'nn.GroupNorm',\n      id: 11,\n      params: {\n        num_groups: { type:'int', min:1, max:Infinity, current:1 },\n        num_channels: { type:'int', min:1, max:Infinity, current:1 },\n        eps: { type:'double', min:1e-5, max:1, current:1e-5 },\n        affine: { type: 'bool', current:'True' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        p.num_channels.current = inp[1]\n        return p\n      }\n    },\n    instancenorm1d: {\n      title: 'InstanceNorm1d',\n      ref: 'nn.InstanceNorm1d',\n      id: 12,\n      params: {\n        num_features: { type:'int', min:1, max:Infinity, current:1 },\n        eps: { type:'double', min:1e-5, max:1, current:1e-5 },\n        momentum: { type:'double', min:0, max:Infinity, current:0.1 },\n        affine: { type: 'bool', current:'False' },\n        track_running_stats: { type: 'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        p.num_features.current = inp[1]\n        return p\n      }\n    },\n    instancenorm2d: {\n      title: 'InstanceNorm2d',\n      ref: 'nn.InstanceNorm2d',\n      id: 13,\n      params: {\n        num_features: { type:'int', min:1, max:Infinity, current:1 },\n        eps: { type:'double', min:1e-5, max:1, current:1e-5 },\n        momentum: { type:'double', min:0, max:Infinity, current:0.1 },\n        affine: { type: 'bool', current:'False' },\n        track_running_stats: { type: 'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        p.num_features.current = inp[1]\n        return p\n      }\n    },\n    instancenorm3d: {\n      title: 'InstanceNorm3d',\n      ref: 'nn.InstanceNorm3d',\n      id: 14,\n      params: {\n        num_features: { type:'int', min:1, max:Infinity, current:1 },\n        eps: { type:'double', min:1e-5, max:1, current:1e-5 },\n        momentum: { type:'double', min:0, max:Infinity, current:0.1 },\n        affine: { type: 'bool', current:'False' },\n        track_running_stats: { type: 'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        p.num_features.current = inp[1]\n        return p\n      }\n    },\n    rnn: {\n      title: 'RNN',\n      ref: 'nn.RNN',\n      id: 15,\n      params: {\n        input_size: { type:'int', min:1, max:Infinity, current:1 },\n        hidden_size: { type:'int', min:1, max:Infinity, current:1 },\n        num_layers: { type:'int', min:1, max:Infinity, current:1 },\n        nonlinearity: { type: 'select', options:['relu', 'tanh'], current:'tanh' },\n        bias: { type: 'bool', current:'True' },\n        batch_first: { type: 'bool', current:'False' },\n        dropout: { type:'double', min:0, max:Infinity, current:0 },\n        bidirectional: { type: 'bool', current:'False' },\n      },\n      outshape: (inp, p) => {\n        var idx = 0\n        var out_shape = inp.map((val, index) => {\n          idx = index\n          return val\n        })\n        out_shape[idx] = p.hidden_size.current\n        return out_shape\n      },\n      autoparams: (inp, p) => {\n        p.input_size.current = inp[inp.length-1]\n        return p\n      }\n    },\n    lstm: {\n      title: 'LSTM',\n      ref: 'nn.LSTM',\n      id: 16,\n      params: {\n        input_size: { type:'int', min:1, max:Infinity, current:1 },\n        hidden_size: { type:'int', min:1, max:Infinity, current:1 },\n        num_layers: { type:'int', min:1, max:Infinity, current:1 },\n        bias: { type: 'bool', current:'True' },\n        batch_first: { type: 'bool', current:'False' },\n        dropout: { type:'double', min:0, max:Infinity, current:0 },\n        bidirectional: { type: 'bool', current:'False' },\n      },\n      outshape: (inp, p) => {\n        var idx = 0\n        var out_shape = inp.map((val, index) => {\n          idx = index\n          return val\n        })\n        out_shape[idx] = p.hidden_size.current\n        return out_shape\n      },\n      autoparams: (inp, p) => {\n        p.input_size.current = inp[inp.length-1]\n        return p\n      }\n    },\n    gru: {\n      title: 'GRU',\n      ref: 'nn.GRU',\n      id: 17,\n      params: {\n        input_size: { type:'int', min:1, max:Infinity, current:1 },\n        hidden_size: { type:'int', min:1, max:Infinity, current:1 },\n        num_layers: { type:'int', min:1, max:Infinity, current:1 },\n        bias: { type: 'bool', current:'True' },\n        batch_first: { type: 'bool', current:'False' },\n        dropout: { type:'double', min:0, max:Infinity, current:0 },\n        bidirectional: { type: 'bool', current:'False' },\n      },\n      outshape: (inp, p) => {\n        var idx = 0\n        var out_shape = inp.map((val, index) => {\n          idx = index\n          return val\n        })\n        out_shape[idx] = p.hidden_size.current\n        return out_shape\n      },\n      autoparams: (inp, p) => {\n        p.input_size.current = inp[inp.length-1]\n        return p\n      }\n    },\n    rnncell: {\n      title: 'RNNCell',\n      ref: 'nn.RNNCell',\n      id: 18,\n      params: {\n        input_size: { type:'int', min:1, max:Infinity, current:1 },\n        hidden_size: { type:'int', min:1, max:Infinity, current:1 },\n        bias: { type: 'bool', current:'True' },\n        nonlinearity: { type: 'select', options:['relu', 'tanh'], current:'tanh' },\n      },\n      outshape: (inp, p) => {\n        var idx = 0\n        var out_shape = inp.map((val, index) => {\n          idx = index\n          return val\n        })\n        out_shape[idx] = p.hidden_size.current\n        return out_shape\n      },\n      autoparams: (inp, p) => {\n        p.input_size.current = inp[inp.length-1]\n        return p\n      }\n    },\n    lstmcell: {\n      title: 'LSTMCell',\n      ref: 'nn.LSTMCell',\n      id: 19,\n      params: {\n        input_size: { type:'int', min:1, max:Infinity, current:1 },\n        hidden_size: { type:'int', min:1, max:Infinity, current:1 },\n        bias: { type: 'bool', current:'True' },\n      },\n      outshape: (inp, p) => {\n        var idx = 0\n        var out_shape = inp.map((val, index) => {\n          idx = index\n          return val\n        })\n        out_shape[idx] = p.hidden_size.current\n        return out_shape\n      },\n      autoparams: (inp, p) => {\n        p.input_size.current = inp[inp.length-1]\n        return p\n      }\n    },\n    grucell: {\n      title: 'GRUCell',\n      ref: 'nn.GRUCell',\n      id: 20,\n      params: {\n        input_size: { type:'int', min:1, max:Infinity, current:1 },\n        hidden_size: { type:'int', min:1, max:Infinity, current:1 },\n        bias: { type: 'bool', current:'True' },\n      },\n      outshape: (inp, p) => {\n        var idx = 0\n        var out_shape = inp.map((val, index) => {\n          idx = index\n          return val\n        })\n        out_shape[idx] = p.hidden_size.current\n        return out_shape\n      },\n      autoparams: (inp, p) => {\n        p.input_size.current = inp[inp.length-1]\n        return p\n      }\n    },\n    dropout: {\n      title: 'Dropout',\n      ref: 'nn.Dropout',\n      id: 21,\n      params: {\n        p: { type:'double', min:0, max:1, current:0.5 },\n        inplace: { type: 'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    dropout2d: {\n      title: 'Dropout2d',\n      ref: 'nn.Dropout2d',\n      id: 22,\n      params: {\n        p: { type:'double', min:0, max:1, current:0.5 },\n        inplace: { type: 'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    dropout3d: {\n      title: 'Dropout3d',\n      ref: 'nn.Dropout3d',\n      id: 23,\n      params: {\n        p: { type:'double', min:0, max:1, current:0.5 },\n        inplace: { type: 'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    alphadropout: {\n      title: 'AlphaDropout',\n      ref: 'nn.AlphaDropout',\n      id: 24,\n      params: {\n        p: { type:'double', min:0, max:1, current:0.5 },\n        inplace: { type: 'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    elu: {\n      title: 'ELU',\n      ref: 'nn.ELU',\n      id: 25,\n      params: {\n        alpha: { type:'double', min:0, max:Infinity, current:1 },\n        inplace: { type:'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    hardshrink: {\n      title: 'Hardshrink',\n      ref: 'nn.Hardshrink',\n      id: 26,\n      params: {\n        lambd: { type:'double', min:-Infinity, max:Infinity, current:'0.5' },\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    hardtanh: {\n      title: 'Hardtanh',\n      ref: 'nn.Hardtanh',\n      id: 27,\n      params: {\n        min_val: { type:'double', min:-Infinity, max:Infinity, current:-1 },\n        max_val: { type:'double', min:-Infinity, max:Infinity, current:1 },\n        inplace: { type:'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    leakyrelu: {\n      title: 'LeakyReLU',\n      ref: 'nn.LeakyReLU',\n      id: 28,\n      params: {\n        negative_slope: { type:'double', min:0, max:Infinity, current:1e-2 },\n        inplace: { type:'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    logsigmoid: {\n      title: 'LogSigmoid',\n      ref: 'nn.LogSigmoid',\n      id: 29,\n      params: {},\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    prelu: {\n      title: 'PReLU',\n      ref: 'nn.PReLU',\n      id: 30,\n      params: {\n        num_parameters: { type:'int', min:0, max:Infinity, current:1 },\n        init: { type:'double', min:0, max:Infinity, current:0.25 }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    relu: {\n      title: 'ReLU',\n      ref: 'nn.ReLU',\n      id: 31,\n      params: {\n        inplace: { type:'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    relu6: {\n      title: 'ReLU6',\n      ref: 'nn.ReLU6',\n      id: 32,\n      params: {\n        inplace: { type:'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    rrelu: {\n      title: 'RReLU',\n      ref: 'nn.RReLU',\n      id: 33,\n      params: {\n        lower: { type:'double', min:0, max:Infinity, current:1/8 },\n        upper: { type:'double', min:0, max:Infinity, current:1/3 },\n        inplace: { type:'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    selu: {\n      title: 'SELU',\n      ref: 'nn.SELU',\n      id: 34,\n      params: {\n        inplace: { type:'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    celu: {\n      title: 'CELU',\n      ref: 'nn.CELU',\n      id: 35,\n      params: {\n        alpha: { type:'double', min:0, max:Infinity, current:1 },\n        inplace: { type:'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    sigmoid: {\n      title: 'Sigmoid',\n      ref: 'nn.Sigmoid',\n      id: 36,\n      params: {},\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    softplus: {\n      title: 'Softplus',\n      ref: 'nn.Softplus',\n      id: 37,\n      params: {\n        beta: { type:'double', min:0, max:Infinity, current:1 },\n        threshold: { type:'double', min:0, max:Infinity, current:20 }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    softshrink: {\n      title: 'Softshrink',\n      ref: 'nn.Softshrink',\n      id: 38,\n      params: {\n        lambd: { type:'double', min:0, max:Infinity, current:0.5 }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    softsign: {\n      title: 'Softsign',\n      ref: 'nn.Softsign',\n      id: 39,\n      params: {},\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    tanh: {\n      title: 'Tanh',\n      ref: 'nn.Tanh',\n      id: 40,\n      params: {},\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    tanhshrink: {\n      title: 'Tanhshrink',\n      ref: 'nn.Tanhshrink',\n      id: 41,\n      params: {},\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    threshold: {\n      title: 'Threshold',\n      ref: 'nn.Threshold',\n      id: 42,\n      params: {\n        threshold: { type:'double', min:0, max:Infinity, current:0.1 },\n        value: { type:'double', min:0, max:Infinity, current:0.1 },\n        inplace: { type:'bool', current:'False' }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    softmin: {\n      title: 'Softmin',\n      ref: 'nn.Softmin',\n      id: 43,\n      params: {\n        dim: { type:'int', min:0, max:Infinity, current:-1 }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    softmax: {\n      title: 'Softmax',\n      ref: 'nn.Softmax',\n      id: 44,\n      params: {\n        dim: { type:'int', min:0, max:Infinity, current:-1 }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    softmax2d: {\n      title: 'Softmax2d',\n      ref: 'nn.Softmax2d',\n      id: 45,\n      params: {},\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n    logsoftmax: {\n      title: 'LogSoftmax',\n      ref: 'nn.LogSoftmax',\n      id: 46,\n      params: {\n        dim: { type:'int', min:0, max:Infinity, current:-1 }\n      },\n      outshape: (inp, p) => {\n        return inp\n      },\n      autoparams: (inp, p) => {\n        return p\n      }\n    },\n  }\n}\n","import React from 'react';\n\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n    overflow:'scroll',\n  },\n  tabsRoot: {\n    borderBottom: '1px solid #1890ff',\n  },\n  tabsIndicator: {\n    backgroundColor: '#1890ff',\n  },\n  tabRoot: {\n    textTransform: 'initial',\n    minWidth: 50,\n    fontWeight: theme.typography.fontWeightRegular,\n    marginRight: theme.spacing.unit * 0,\n    fontFamily: [\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'Roboto',\n      '\"Helvetica Neue\"',\n      'Arial',\n      'sans-serif',\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"',\n    ].join(','),\n    '&:hover': {\n      color: '#40a9ff',\n      opacity: 1,\n    },\n    '&$tabSelected': {\n      color: '#1890ff',\n    },\n    '&:focus': {\n      color: '#40a9ff',\n    },\n  },\n  tabSelected: {},\n  typography: {\n    padding: theme.spacing.unit * 0,\n  },\n});\n\nclass TabContainer extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      value: props.tab !== undefined ? props.tabs.indexOf(props.tab) : 0\n    }\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { value } = this.state;\n    const width = Math.ceil(this.props.width/this.props.tabs.length) + 'px'\n\n    return (\n      <div className={classes.root} style={{overflow:'hidden'}}>\n        <Tabs\n          value={value}\n          onChange={(e, value) => {\n            this.setState({ value });\n            if (this.props.onSelectTab) this.props.onSelectTab(this.props.tabs[value]);\n          }}\n          textColor=\"primary\"\n          classes={{ root: classes.tabsRoot, indicator: classes.tabsIndicator }}\n          scrollButtons={false}>\n          {\n            this.props.tabs.map(value => {\n              return (\n                <Tab\n                  disableRipple\n                  classes={{ root: classes.tabRoot, selected: classes.tabSelected }}\n                  label={value}\n                  style={{width: width}}\n                />\n              )\n            })\n          }\n        </Tabs>\n      </div>\n    );\n  }\n}\n\nTabContainer.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(TabContainer);\n","import React, { Component } from 'react';\n\nimport './Sidebar.css';\nimport { PyTorchParser } from './parsers/Parsers.js';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { github, atelierForestDark } from 'react-syntax-highlighter/dist/styles/hljs';\n\nimport Typography from '@material-ui/core/Typography';\nimport TabContainer from './TabContainer.js'\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Drawer from '@material-ui/core/Drawer';\nimport Button from '@material-ui/core/Button';\n\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport red from '@material-ui/core/colors/red';\n\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\n\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Fab from '@material-ui/core/Fab';\nimport IconButton from '@material-ui/core/IconButton';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\n\nimport { FaGithub, FaLinkedin, FaNpm } from \"react-icons/fa\";\n\nvar htmlToImage = require('html-to-image');\n\nconst darktheme = createMuiTheme({\n  palette: {\n    type: 'dark',\n  },\n  typography: { useNextVariants: true },\n});\n\nconst lighttheme = createMuiTheme({\n  palette: {\n    type: 'light',\n  },\n  typography: { useNextVariants: true },\n});\n\ngithub.hljs.background = '#ffffff';\n\nexport const themes = [\n  'red',\n  'pink',,\n  'purple',\n  'deep-purple',\n  'indigo',\n  'blue',\n  'light-blue',\n  'green',\n  'light-green',\n  'lime',\n  'yellow',\n  'amber',\n  'orange',\n  'deep-orange',\n  'brown',\n  'grey',\n  'blue-grey',\n  'black',\n  'white'\n]\n\n\nconst SettingsTab = (props) => {\n  var env = props.environment;\n  return (\n    <div style={{ padding:'15px' }}>\n\n      <div>\n        <h3 style={{marginTop:'0px'}}>Environment</h3>\n        <FormControl>\n          <InputLabel htmlFor='libSelect'>Library</InputLabel>\n          <Select\n            value={env.library}\n            inputProps={{ name:'library select', id:'libSelect'}}\n            onChange={(e) => {\n              var environment = props.refresh().environment;\n              environment.library = e.target.value;\n              props.updateEnv(environment)\n            }}>\n            {\n              env.libraries.map(libname => {\n                return (\n                  <MenuItem value={libname}>{libname}</MenuItem>\n                )\n              })\n            }\n          </Select>\n        </FormControl>\n      </div>\n\n      <div style={{paddingTop:'20px'}}>\n        <h3>Customize view</h3>\n\n        <div style={{paddingBottom:10}}>\n          <FormControl style={{width:'48%', paddingRight:10, paddingBottom:10}}>\n            <InputLabel htmlFor='themeselect'>Theme</InputLabel>\n            <Select\n              value={props.settings.theme}\n              inputProps={{ name:'theme select', id:'themeselect'}}\n              onChange={(e) => {\n                var settings = props.refresh().settings;\n                settings.theme = e.target.value;\n                props.updateSettings(settings)\n              }}>\n              {\n                themes.map(themename => {\n                  return (\n                    <MenuItem value={themename}>{themename}</MenuItem>\n                  )\n                })\n              }\n            </Select>\n          </FormControl>\n\n          <FormControl style={{width:'48%'}}>\n            <InputLabel htmlFor='varselect'>Variant</InputLabel>\n            <Select\n              value={props.settings.variant}\n              inputProps={{ name:'vairant select', id:'varselect'}}\n              onChange={(e) => {\n                var settings = props.refresh().settings;\n                settings.variant = e.target.value;\n                props.updateSettings(settings)\n              }}>\n              {\n                ['paper','outlined','filled'].map(varname => {\n                  return (\n                    <MenuItem value={varname}>{varname}</MenuItem>\n                  )\n                })\n              }\n            </Select>\n          </FormControl>\n        </div>\n\n        {\n          [\n            {r:'darktheme', t:'Dark theme'},\n            {r:'showName', t:'Show names'},\n            {r:'showShape', t:'Show shapes'},\n            {r:'avoidCollisions', t:'Avoid collisions'}\n          ].map(tmp => {\n            return (\n              <FormControlLabel\n                style={{paddingTop:0}}\n                control={\n                  <Switch\n                    checked={props.settings[tmp.r]}\n                    color='primary'\n                    onChange={e => {\n                      var settings = props.refresh().settings;\n                      settings[tmp.r] = !settings[tmp.r];\n                      props.updateSettings(settings)\n                    }}/>\n                }\n                label={tmp.t}/>\n            )\n          })\n        }\n      </div>\n\n      <div style={{paddingTop:20}}>\n        <Button\n          variant=\"outlined\"\n          onClick={(e) => {\n            htmlToImage.toPng(props.diagramRef).then(function (dataUrl) {\n              var img = new Image();\n              img.src = dataUrl;\n              var link = document.createElement('a');\n              link.download = 'diagram.png';\n              link.href = dataUrl;\n              link.click();\n            })\n          }}>\n          Export png\n        </Button>\n      </div>\n\n    </div>\n  )\n}\n\n\n\nconst CodeTab = props => {\n\n  // Selecting parser\n  var parser = null\n  if (props.environment.library === 'PyTorch') parser = PyTorchParser;\n\n  // Selecting theme\n  const codetheme = props.darktheme ? atelierForestDark : github;\n\n  return (\n    <div style={{fontSize:12}}>\n      <SyntaxHighlighter language='python' style={codetheme} showLineNumbers>\n        {\n          props.code\n        }\n      </SyntaxHighlighter>\n    </div>\n  )\n\n}\n\n\n\nconst FlowpointTab = props => {\n\n  var point = props.flowpoints[props.selected];\n\n  if (point) {\n\n    // Helpers\n    const params = point.specs.params;\n    var fields = { 'int':[], 'double':[], 'bool':[], 'tuple':[], 'select':[] };\n\n    // Input?\n    if (point.specs.title === 'Input') {\n      fields.int.push(\n        <TextField\n          label='N dimensions'\n          type='number'\n          variant='outlined'\n          margin='dense'\n          style={{width:'155px', paddingRight:'5px'}}\n          value={params.n_dims.current}\n          onChange={e => {\n            var flowpoints = props.refresh().flowpoints;\n            var p = flowpoints[props.selected];\n            var params = p.specs.params;\n            params.n_dims.current = Math.max(Math.min(e.target.value, params.n_dims.max), params.n_dims.min);\n            if (params.n_dims.current < params.dimensions.current.length) {\n              params.dimensions.current = params.dimensions.current.splice(0, params.n_dims.current)\n            } else if (params.n_dims.current > params.dimensions.current.length) {\n              Array.from(Array(params.n_dims.current - params.dimensions.current.length).keys()).map(idx => {\n                params.dimensions.current.push(1)\n              })\n            }\n            props.updatePointSettings(props.selected, p)\n          }}/>\n      )\n    }\n\n    Object.keys(params).map(paramkey => {\n      const param = params[paramkey]\n      switch(param.type) {\n        case 'int':\n          fields.int.push(\n            <TextField\n              label={paramkey}\n              type='number'\n              variant='outlined'\n              margin='dense'\n              style={{width:'155px', paddingRight:'5px'}}\n              value={params[paramkey].current}\n              onChange={e => {\n                var flowpoints = props.refresh().flowpoints;\n                var p = flowpoints[props.selected];\n                var param = p.specs.params[paramkey];\n                param.current = e.target.value === '' ? '' : Math.max(Math.min(e.target.value, param.max), param.min);\n                props.updatePointSettings(props.selected, p)\n              }}/>\n          )\n          break;\n        case 'double':\n          fields.double.push(\n            <TextField\n              label={paramkey}\n              type='number'\n              variant='outlined'\n              margin='dense'\n              style={{width:'155px', paddingRight:'5px'}}\n              value={params[paramkey].current}\n              onChange={e => {\n                var flowpoints = props.refresh().flowpoints;\n                var p = flowpoints[props.selected];\n                var param = p.specs.params[paramkey];\n                param.current = e.target.value === '' ? '' : Math.max(Math.min(e.target.value, param.max), param.min);\n                props.updatePointSettings(props.selected, p)\n              }}/>\n          )\n          break;\n        case 'bool':\n          fields.bool.push(\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={param.current === 'True'}\n                  color='primary'\n                  onChange={e => {\n                    var flowpoints = props.refresh().flowpoints;\n                    var p = flowpoints[props.selected];\n                    var param = p.specs.params[paramkey];\n                    if (param.current === 'True') {\n                      param.current = 'False';\n                    } else {\n                      param.current = 'True';\n                    }\n                    props.updatePointSettings(props.selected, p)\n                  }}/>\n              }\n              label={paramkey}/>\n          )\n          break;\n        case 'tuple':\n          fields.tuple.push(\n            <div style={{paddingTop:'15px'}}>\n              <div><h5 style={{margin:'0px'}}>{paramkey}</h5></div>\n              {\n                param.current.map((val, index) => {\n                  return (\n                    <TextField\n                      label={paramkey + ' ' + index}\n                      type='number'\n                      variant='outlined'\n                      margin='dense'\n                      style={{width:'155px', paddingRight:'5px'}}\n                      value={val}\n                      onChange={e => {\n                        var flowpoints = props.refresh().flowpoints;\n                        var p = flowpoints[props.selected]\n                        var param = flowpoints[props.selected].specs.params[paramkey];\n                        param.current[index] = e.target.value === '' ? '' : Math.max(Math.min(e.target.value, param.max), param.min);\n                        props.updatePointSettings(props.selected, p)\n                      }}/>\n                  )\n                })\n              }\n            </div>\n          )\n          break;\n        case 'select':\n          fields.select.push(\n            <FormControl>\n              <InputLabel htmlFor=\"selectfield\">{paramkey}</InputLabel>\n              <Select\n                value={params[paramkey].options.indexOf(params[paramkey].current)}\n                style={{width:'155px', paddingRight:'5px'}}\n                onChange={(e) => {\n                  var flowpoints = props.refresh().flowpoints;\n                  var p = flowpoints[props.selected];\n                  var param = p.specs.params[paramkey];\n                  param.current = param.options[e.target.value]\n                  props.updatePointSettings(props.selected, p)\n                }}\n                inputProps={{id:'selectfield'}}>\n                {\n                  params[paramkey].options.map((opt_val, opt_idx) => {\n                    return (\n                      <MenuItem value={opt_idx}>{opt_val}</MenuItem>\n                    )\n                  })\n                }\n              </Select>\n            </FormControl>\n          )\n          break;\n      }\n    })\n\n    // List of module types\n    const modules = props.environment.getModules()\n    var title2key = {}\n    Object.keys(modules).map(mod_key => {\n      title2key[modules[mod_key].title] = mod_key;\n    })\n\n    return (\n      <div style={{padding:'15px'}}>\n\n        <div>\n\n          <h2 style={{marginTop:'0px'}}>Flowpoint settings</h2>\n\n          <FormControl style={{width:'100%'}}>\n            <Select\n              value={point.specs.title}\n              inputProps={{ name:'spec select', id:'specselect'}}\n              onChange={(e) => {\n                if (e.target.value in title2key) {\n                  var flowpoints = props.refresh().flowpoints;\n                  var p = flowpoints[props.selected];\n                  p.specs = modules[title2key[e.target.value]];\n                  props.updatePointSettings(props.selected, p)\n                }\n              }}>\n              {\n                Object.keys(title2key).map(varname => {\n                  return (\n                    <MenuItem value={varname}>{varname}</MenuItem>\n                  )\n                })\n              }\n            </Select>\n          </FormControl>\n\n          <TextField\n            label='Name'\n            value={point.name}\n            margin='tight'\n            style={{width:'80%'}}\n            onChange={e => {\n              var flowpoints = props.refresh().flowpoints;\n              var p = flowpoints[props.selected];\n              p.name = e.target.value;\n              props.updatePointSettings(props.selected, p)\n            }}/>\n\n          <IconButton\n            aria-label=\"Delete\"\n            color={red[500]}\n            style={{\n              marginLeft:10,\n              marginTop:5,\n              color:red[300]\n            }}\n            onClick={props.deleteSelected}>\n            <DeleteIcon />\n          </IconButton>\n\n        </div>\n\n        <div style={{paddingTop:'25px'}}>\n          <h3>Parameters</h3>\n          <div>{ fields.int    }</div>\n          <div>{ fields.double }</div>\n          <div>{ fields.select }</div>\n          <div>{ fields.tuple  }</div>\n          <div>{ fields.bool   }</div>\n        </div>\n\n      </div>\n    )\n  } else {\n    return (\n      <div style={{display:'table', width:'100%', height:'50px'}}>\n        <div style={{display:'table-cell', verticalAlign:'middle', textAlign:'center'}}>\n          Click on a flowpoint to display it's settings.\n        </div>\n      </div>\n    )\n  }\n}\n\n\nexport const Sidebar = (props) => {\n  return (\n    <MuiThemeProvider theme={props.darktheme ? darktheme : lighttheme}>\n\n      <Drawer\n        variant='persistent'\n        anchor='left'\n        open={props.open}>\n\n        <div\n          class='fullSidebar'\n          style={{\n            maxWidth:props.settings.drawerWidth,\n            color: (props.darktheme ? 'white' : 'black')\n          }}>\n\n          <Typography gutterBottom variant=\"h5\" component=\"h2\" style={{padding:'15px'}}>\n            Flowpoints ML\n          </Typography>\n\n          <div style={{position:'absolute', right:5, top:5}}>\n            <IconButton target='_blank' href='https://www.npmjs.com/package/flowpoints'>\n              <FaNpm/>\n            </IconButton>\n            <IconButton target='_blank' href='https://www.linkedin.com/in/marius-brataas-355567106/'>\n              <FaLinkedin/>\n            </IconButton>\n            <IconButton target='_blank' href='https://github.com/mariusbrataas/flowpoints_ml#readme'>\n              <FaGithub/>\n            </IconButton>\n          </div>\n\n          <div>\n            <TabContainer\n              tabs={['Misc', 'Code', 'Flowpoint']}\n              tab={props.settings.tab}\n              width={350}\n              onSelectTab={(value) => {\n                var settings = props.refresh().settings;\n                settings.tab = value;\n                if (value === 'Code') {\n                  settings.drawerWidth = 600\n                } else {\n                  settings.drawerWidth = 350\n                }\n                props.updateSettings(settings);\n              }}/>\n          </div>\n\n          <div class='scrollBox' style={{backgroundColor:(props.darktheme ? atelierForestDark.hljs.background : null)}}>\n\n            <div>\n              {\n                props.settings.tab === 'Misc' ? <SettingsTab\n                  environment={props.environment}\n                  flowpoints={props.flowpoints}\n                  refresh={props.refresh}\n                  updateEnv={props.updateEnv}\n                  settings={props.settings}\n                  updateSettings={props.updateSettings}\n                  diagramRef={props.diagramRef}/> : null\n              }\n              {\n                props.settings.tab === 'Code' ? <CodeTab\n                  environment={props.environment}\n                  flowpoints={props.flowpoints}\n                  refresh={props.refresh}\n                  code={props.code}\n                  darktheme={props.darktheme}/> : null\n              }\n              {\n                props.settings.tab === 'Flowpoint' ? <FlowpointTab\n                  selected={props.selected}\n                  settings={props.settings}\n                  environment={props.environment}\n                  flowpoints={props.flowpoints}\n                  refresh={props.refresh}\n                  deleteSelected={props.deleteSelected}\n                  updatePointSettings={props.updatePointSettings}/> : null\n              }\n            </div>\n\n          </div>\n\n        </div>\n\n      </Drawer>\n\n    </MuiThemeProvider>\n  )\n}\n","import React, { Component } from 'react';\nimport { PyTorchModules } from './libraries/pytorch.js';\n\n/*\nconst lvls = {\n  0: '%24',\n  1: '#',\n  2: '%2C',\n  3: '%'\n}*/\n/*\nconst lvls = {\n  0: 'MAIS',\n  1: 'FISK',\n  2: 'OST',\n  3: 'KORN'\n}*/\n\nexport const themes = [\n  'red',\n  'pink',,\n  'purple',\n  'deep-purple',\n  'indigo',\n  'blue',\n  'light-blue',\n  'green',\n  'light-green',\n  'lime',\n  'yellow',\n  'amber',\n  'orange',\n  'deep-orange',\n  'brown',\n  'grey',\n  'blue-grey',\n  'black',\n  'white'\n]\n\nconst lvls = {\n  0: 'IIA',\n  1: 'IIB',\n  2: 'IIC',\n  3: 'IID'\n}\n\nfunction num2string(num) {\n  return num.toString(36)\n}\n\nfunction string2num(str) {\n  return parseInt(str, 36)\n}\n\nfunction encodeParams(params) {\n  var msg = ''\n  Object.keys(params).sort().map(pkey => {\n    const param = params[pkey]\n    if (param.type === 'bool') {\n      msg += (param.current === 'True' ? 't' : 'f')\n    } else if (param.type === 'tuple') {\n      param.current.map(pval => {\n        msg += num2string(pval) + lvls[3]\n      })\n      msg = msg.substring(0, msg.length - lvls[3].length)\n    } else if (param.type === 'select') {\n      msg += param.options.indexOf(param.current)\n    } else if (param.type === 'int') {\n      msg += num2string(param.current)\n    } else {\n      msg += param.current\n    }\n    msg += lvls[2]\n  })\n  return msg.substring(0, msg.length - lvls[2].length)\n}\n//https://mariusbrataas.github.io/flowpoints_ml/?p=loadPDF_3_41e2f4_4164f4_0##5#5#0#1aa%2C2aa%2#t%2C1%2C1%2_1##p#5#0##t%2C1%2C1%2_2##p#c#0##t%2C1%2C1%2\n//https://mariusbrataas.github.io/flowpoints_ml/?p=loadPDF_3_41e2f4_4164f4_0##5#5#0#1aa%2C2aa%2#t%2C1%2C1%2_1##p#5#0##t%2C1%2C1%2_2##p#c#0##t%2C1%2C1%2\n\nfunction decodeParams(msg, specs) {\n  var params = specs.params;\n  const queries = msg.split(lvls[2])\n  Object.keys(params).sort().map((pkey, idx) => {\n    var param = params[pkey]\n    const q = queries[idx]\n    if (param.type === 'bool') {\n      param.current = (q === 't' ? 'True' : 'False')\n    } else if (param.type === 'tuple') {\n      q.split(lvls[3]).map((pval, pidx) => {\n        param.current[pidx] = string2num(pval)\n      })\n    } else if (param.type === 'select') {\n      param.current = param.options[q]\n    } else if (param.type === 'int') {\n      param.current = string2num(q)\n    } else {\n      param.current = q\n    }\n  })\n  specs.params = params\n  return specs\n}\n\nfunction encodeOutputs(outputs) {\n  var msg = ''\n  Object.keys(outputs).map(out_key => {\n    msg += num2string(out_key) + outputs[out_key].output[0] + outputs[out_key].input[0] + lvls[2]\n  })\n  if (Object.keys(outputs).length > 0) {\n    msg = msg.substring(0, msg.length - lvls[2].length)\n  }\n  return msg\n}\n\nfunction decodeOutputs(msg) {\n  const pos2title = {\n    a: 'auto',\n    t: 'top',\n    l: 'left',\n    r: 'right',\n    b: 'bottom'\n  }\n  var queries = msg.split(lvls[2])\n  var outputs = {}\n  queries.map(query => {\n    if (query !== '') {\n      outputs[query.substring(0, query.length - 2)] = {\n        output: pos2title[query[query.length - 2]],\n        input: pos2title[query[query.length - 1]]\n      }\n    }\n  })\n  return outputs\n}\n\nfunction encodePoint(p, key) {\n  /*\n  0: key\n  1: name\n  2: x\n  3: y\n  4: id\n  5: outputs\n  6: params\n  */\n  var msg = '' + key\n  msg += lvls[1] + p.name\n  msg += lvls[1] + num2string(Math.round(p.pos.x/10))\n  msg += lvls[1] + num2string(Math.round(p.pos.y/10))\n  msg += lvls[1] + (p.specs.title === 'Input' ? '' : num2string(p.specs.id))\n  msg += lvls[1] + encodeOutputs(p.outputs)\n  msg += lvls[1] + encodeParams(p.specs.params)\n  return msg\n}\n\nfunction decodePoint(msg, id2key, getModules) {\n  const queries = msg.split(lvls[1])\n\n  // Decoding some basics\n  var p = {\n    name: queries[1],\n    output_shape: [],\n    pos: {\n      x: string2num(queries[2]) * 10,\n      y: string2num(queries[3]) * 10,\n    },\n    specs: decodeParams(queries[6], getModules()[queries[4] === '' ? 'input' : id2key[string2num(queries[4])]]),\n    outputs: decodeOutputs(queries[5]),\n    isHover: false\n  }\n  return { key:queries[0], p:p }\n}\n\nexport function parseToQuery(flowpoints, theme, variant, background, count, darktheme, showNames, library, showSidebar) {\n  const variant2key = {\n    'paper': 0,\n    'outlined': 1,\n    'filled':2\n  }\n  // LibraryTheme_Count_Incolor_Outcolor_point_point_\n  var msg = '' + library[0]\n  msg += num2string(themes.indexOf(theme))\n  msg += variant2key[variant]\n  msg += num2string(themes.indexOf(background))\n  msg += (darktheme ? 'D' : 'L')\n  msg += (showNames ? 'T' : 'F')\n  msg += (showSidebar ? 'T' : 'F')\n  msg += lvls[0] + num2string(count)\n  Object.keys(flowpoints).map(key => {\n    msg += lvls[0] + encodePoint(flowpoints[key], key)\n  })\n  return msg\n}\n\n\nexport function parseFromQuery(query) {\n  query = query.replace(/%20/g, ' ')\n  const queries = query.split(lvls[0])\n\n  // Helpers\n  const key2lib = {\n    P: {t:'PyTorch', modules:PyTorchModules}\n  }\n  const key2variant = {\n    0: 'paper',\n    1: 'outlined',\n    2: 'filled'\n  }\n\n  // Creating lib\n  var lib = {\n    library: key2lib[query[0]].t,\n    getModules: key2lib[query[0]].modules,\n    darktheme: (query[4] === 'D' ? true : false),\n    showName: (query[5] === 'T' ? true : false),\n    showSidebar: (query[6] === 'T' ? true : false),\n    count: string2num(queries[0]),\n    theme: themes[string2num(query[1])],\n    variant: key2variant[query[2]],\n    background: themes[string2num(query[3])]\n  }\n\n  // Id to module key\n  var id2key = {}\n  var modules = lib.getModules()\n  Object.keys(modules).map(mod_key => {\n    id2key[modules[mod_key].id] = mod_key\n  })\n\n  // Parsing all points\n  var flowpoints = {}\n  queries.splice(2, queries.length).map(point_query => {\n    const newpoint = decodePoint(point_query, id2key, lib.getModules);\n    flowpoints[newpoint.key] = newpoint.p\n  })\n  lib['flowpoints'] = flowpoints;\n\n  // Fixing inputs n_dims\n  Object.keys(flowpoints).map(key => {\n    if (flowpoints[key].specs.title === 'Input') {\n      flowpoints[key].specs.params.n_dims.current = flowpoints[key].specs.params.dimensions.current.length;\n    }\n  })\n\n  // Returning\n  return lib\n\n}\n","/*\nDBhandler.js\n\nWriting to and reading from a public google sheet.\nRows are added to the sheet using forms. This is a hackish solution that\ndoesn't allow changing of existing entries, but it serves it's purpose well\nfor this project.\n*/\n\n// Imports\nimport axios from 'axios'\n\n// Helper to replace all occurences of substring in string\nfunction ReplaceAll(str, search, replacement) {\n  var msg = ''\n  str.split(search).map(sub => {\n    msg += sub + replacement\n  })\n  return msg.substring(0, msg.length - replacement.length)\n}\n\n// Converting a number to a 36 numeral string representation\nfunction num2string(num) {\n  return num.toString(36)\n}\n\n// Converting back to number\nfunction string2num(str) {\n  return parseInt(str, 36)\n}\n\n// Generating id.\n// IDs are kept unique (most likely) by making parts of the ID rely entirely on\n// the current date and time, and having the rest generated randomly.\nfunction getId(l) {\n  l = Math.min(20, Math.max(10, l || 15))\n  var d = new Date()\n  var n = ''\n  n += '' + d.getSeconds()\n  n += '' + d.getMonth()\n  n += '' + d.getYear().toString().substring(1)\n  n += '' + d.getHours()\n  n += '' + d.getMinutes()\n  var msg = num2string(parseInt(n))\n  const lib = 'abcdefghijklmnopqrstuvwxyz0123456789'\n  Array.from(Array(l - msg.length).keys()).map(idx => {\n    msg = lib[Math.floor(Math.random() * lib.length)] + msg;\n  })\n  return msg\n}\n\n// Using google forms to add a new row to the sheet\nexport function postToDB(content, cb) {\n  const mod_id = getId();\n  var url = 'https://docs.google.com/forms/d/e/1FAIpQLSfTgXs4tTJ5drC44SVHCJaJoIwogOwK6WBrGT2-s85Ndaqz_g/formResponse?usp=pp_url'\n  url += '&entry.865206380=' + mod_id;\n  url += '&entry.854684610=' + content;\n  url += '&submit=Submit'\n  axios.get(url).then(res => {})\n  cb(mod_id)\n}\n\n// Fetching a json representation of the sheet using axios\nexport function getDB(cb) {\n  var res;\n  axios.get('https://spreadsheets.google.com/feeds/list/11Z7JHNLrE0ODKnGwU0NOblcV-OxRcbugr8ujNZDzTRA/od6/public/basic?alt=json').then(res => {\n    var lib = {}\n    res.data.feed.entry.map(entry => {\n      lib[entry.title['$t']] = entry.content['$t'].split('content: ')[1]\n    })\n    cb(lib)\n  })\n}\n","import React, { Component } from 'react';\nimport './App.css';\n\nimport { Flowpoint, Flowspace } from 'flowpoints';\nimport { FlowOrder } from './sidebar/FlowOrder.js';\nimport { PyTorchParser } from './sidebar/parsers/Parsers.js';\nimport { PyTorchModules } from './libraries/pytorch.js';\nimport { Sidebar } from './sidebar/Sidebar.js';\nimport { parseToQuery, parseFromQuery } from './URLparser.js';\nimport { postToDB, getDB } from './DBhandler.js';\n\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport LinkIcon from '@material-ui/icons/Link';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\n\nimport green from '@material-ui/core/colors/green';\nimport red from '@material-ui/core/colors/red';\nimport grey from '@material-ui/core/colors/grey';\nimport blue from '@material-ui/core/colors/blue';\nimport indigo from '@material-ui/core/colors/indigo';\nimport deepPurple from '@material-ui/core/colors/deepPurple';\nimport lightBlue from '@material-ui/core/colors/lightBlue';\nimport teal from '@material-ui/core/colors/teal';\nimport blueGrey from '@material-ui/core/colors/blueGrey';\n\nimport copy from 'copy-to-clipboard';\n\nfunction shapeBox(shape) {\n  var msg = '['\n  shape.map(val => {\n    msg += val + ','\n  })\n  if (shape.length > 0) msg = msg.substring(0, msg.length - 1)\n  msg += ']'\n  return (\n    <div style={{textAlign:'center', paddingBottom:'10px'}}>\n      {\n        msg\n      }\n    </div>\n  )\n}\n\nfunction ReplaceAll(str, search, replacement) {\n  var newstr = ''\n  str.split(search).map(val => {newstr += val + replacement})\n  return newstr.substring(0, newstr.length - replacement.length)\n}\n\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lastPos: {x:50, y:-40},\n      code: '',\n      selected: null,\n      count: 0,\n      flowpoints: {},\n      current_url: '',\n      url: '',\n      settings:{\n        tab: 'Misc',\n        theme: 'indigo',\n        background: 'black',\n        variant:'outlined',\n        drawerWidth: 350,\n        darktheme: true,\n        showShape: false,\n        showName: false,\n        showSidebar: true,\n        avoidCollisions: true,\n        snackshow: false,\n        snackmsg: 'Hello world',\n        snackcolor: green['A700'],\n        modelUrl: null\n      },\n      environment: {\n        library: 'PyTorch',\n        libraries: [ 'PyTorch' ],\n        getModules: PyTorchModules\n      }\n    }\n\n    // Helpers\n    this.baseUrl = window.location.href.split('/?')[0]\n    if (this.baseUrl[this.baseUrl.length - 1] !== '/') this.baseUrl += '/'\n    this.lib = {}\n    this.diagramRef = null;\n\n    // Binding class methods\n    this.addFlowpoint = this.addFlowpoint.bind(this);\n    this.handleClickPoint = this.handleClickPoint.bind(this);\n    this.deleteSelected = this.deleteSelected.bind(this);\n    this.prepCode = this.prepCode.bind(this);\n    this.prepOutputShapes = this.prepOutputShapes.bind(this);\n    this.updatePointSettings = this.updatePointSettings.bind(this);\n\n  }\n\n\n  componentDidMount() {\n    var query = window.location.href.split(this.baseUrl)[1]\n\n    if (query.includes('p=')) {\n\n      // Snack message\n      var settings = this.state.settings;\n      settings.snackshow = true;\n      settings.snackmsg = 'Trying to load model';\n      settings.snackcolor = blue['A700'];\n      settings.modelUrl = this.baseUrl + query.substring(0, 18)\n      this.setState({settings})\n\n      try {\n\n        getDB(data => {\n\n          query = query.split('?p=')[1].substring(0, 15)\n          query = data[query]\n\n          if (query) {\n            query = ReplaceAll(query, 'lll', '.')\n            var newlib = parseFromQuery(query)\n\n            // Updating settings and env\n            settings = this.state.settings;\n            var environment = this.state.environment;\n            settings.darktheme = newlib.darktheme;\n            settings.showName = newlib.showName;\n            settings.theme = newlib.theme;\n            settings.background = newlib.background;\n            settings.variant = newlib.variant;\n            settings.showSidebar = newlib.showSidebar;\n            environment.library = newlib.library;\n\n            // Snack message\n            settings.snackshow = true;\n            settings.snackmsg = 'Loaded model from URL';\n            settings.snackcolor = green['A700'];\n\n            // Updating self\n            this.setState({\n              count:newlib.count,\n              flowpoints:newlib.flowpoints,\n              settings:settings,\n              environment:environment\n            }, () => {\n              this.prepOutputShapes();\n              this.prepCode();\n            })\n\n          }\n\n        })\n\n      } catch(err) {\n        console.log(err)\n        var settings = this.state.settings;\n        settings.snackshow = true;\n        settings.snackmsg = 'Failed to load from URL';\n        settings.snackcolor = red['A400'];\n        this.setState({ settings });\n      }\n\n    } else {\n      this.prepOutputShapes();\n      this.prepCode();\n    }\n  }\n\n\n  prepCode() {\n\n    // Selecting parser\n    var parser = null;\n    if (this.state.environment.library === 'PyTorch') parser = PyTorchParser;\n\n    // Parsing code and updating state\n    this.setState({ code:parser(this.state.flowpoints, this.lib, this.state.settings.modelUrl) + '\\n\\n\\n' })\n\n  }\n\n\n  prepOutputShapes() {\n\n    // Helper\n    var flowpoints = this.state.flowpoints;\n\n    // Getting floworder and updating lib\n    this.lib = FlowOrder(flowpoints)\n\n    // Setting output-shapes of inputs\n    var visited = []\n    this.lib.order.map(key => {\n      if (this.lib.lib[key].specTitle === 'Input') {\n        flowpoints[key].output_shape = flowpoints[key].specs.outshape(null, flowpoints[key].specs.params)\n        visited.push(key)\n      }\n    })\n\n    // Setting all output-shapes\n    this.lib.order.map(key => {\n      if (!visited.includes(key)) {\n        var bestInp = null\n        Object.keys(this.lib.lib[key].inputs).map(inp_key => {\n          if (visited.includes(inp_key)) bestInp = inp_key\n        })\n        flowpoints[key].specs.params = flowpoints[key].specs.autoparams(flowpoints[bestInp].output_shape, flowpoints[key].specs.params)\n        flowpoints[key].output_shape = flowpoints[key].specs.outshape(flowpoints[bestInp].output_shape, flowpoints[key].specs.params)\n        visited.push(key)\n      }\n    })\n\n    // Updating state\n    this.setState({ flowpoints })\n\n  }\n\n\n  updatePointSettings(key, settings) {\n    var flowpoints = this.state.flowpoints;\n    flowpoints[key] = settings;\n    this.setState({ flowpoints });\n    this.prepOutputShapes();\n    this.prepCode();\n  }\n\n\n  deleteSelected() {\n    var flowpoints = this.state.flowpoints;\n    delete flowpoints[this.state.selected]\n    Object.keys(flowpoints).map(test_key => {\n      if (this.state.selected in flowpoints[test_key].outputs) {\n        delete flowpoints[test_key].outputs[this.state.selected];\n      }\n    })\n    this.setState({flowpoints, selected:null});\n    this.prepOutputShapes();\n    this.prepCode();\n  }\n\n\n  addFlowpoint() {\n    var flowpoints = this.state.flowpoints;\n    flowpoints['' + this.state.count] = {\n      name: '',\n      output_shape: [],\n      pos: {x:this.state.lastPos.x, y:this.state.lastPos.y + 90},\n      outputs: {},\n      isHover: false,\n      specs: this.state.environment.getModules().linear\n    }\n    if (this.state.selected) {\n      flowpoints[this.state.selected].outputs['' + this.state.count] = {\n        output:'auto',\n        input:'auto'\n      }\n    }\n    this.setState({ flowpoints, count:this.state.count + 1, lastPos:{x:this.state.lastPos.x, y:this.state.lastPos.y + 90}, selected:'' + (this.state.count) })\n    this.prepOutputShapes();\n    this.prepCode();\n  }\n\n\n  handleClickPoint(key, e) {\n    var selected = this.state.selected\n    var flowpoints = this.state.flowpoints\n    if (e.shiftKey) {\n      if (selected === null) {\n        selected = key\n      } else {\n        if (selected !== key) {\n          var p1 = flowpoints[selected]\n          if (key in p1.outputs) {\n            delete p1.outputs[key]\n          } else {\n            p1.outputs[key] = {\n              output:'auto',\n              input:'auto',\n              onClick:this.handleClickLine\n            }\n          }\n        }\n      }\n    } else {\n      selected = (selected === null ? key : (selected === key ? null : key))\n    }\n    this.setState({selected, flowpoints})\n    this.prepOutputShapes();\n    this.prepCode();\n  }\n\n\n  render() {\n    return (\n      <div style={{backgroundColor: (this.state.settings.darktheme ? 'black' : 'white')}}>\n\n        <Sidebar\n          selected={this.state.selected}\n          open={this.state.settings.showSidebar}\n          flowpoints={this.state.flowpoints}\n          settings={this.state.settings}\n          environment={this.state.environment}\n          refresh={() => {return this.state}}\n          updateSettings={(settings) => {this.setState({settings})}}\n          updateEnv={(environment) => {this.setState({environment})}}\n          deleteSelected={this.deleteSelected}\n          darktheme={this.state.settings.darktheme}\n          code={this.state.code}\n          updatePointSettings={this.updatePointSettings}\n          diagramRef={this.diagramRef}/>\n\n        <Flowspace\n          theme={this.state.settings.theme}\n          variant={this.state.settings.variant}\n          background={this.state.settings.darktheme ? 'black' : 'white'}\n          selected={this.state.selected}\n          getDiagramRef={ref => {this.diagramRef = ref}}\n          avoidCollisions={this.state.settings.avoidCollisions}\n          onClick={e => {this.setState({ selected:null })}}\n          style={{\n            height:'100vh',\n            width:('calc(100vw - ' + this.state.settings.drawerWidth * this.state.settings.showSidebar + ')'),\n            marginLeft:this.state.settings.drawerWidth * this.state.settings.showSidebar + 'px',\n            transition:['margin-left 0.4s ease-out','background-color 0.2s ease-out']\n          }}>\n          {\n            Object.keys(this.state.flowpoints).map(key => {\n              const point = this.state.flowpoints[key];\n              return (\n                <Flowpoint\n                  key={key}\n                  snap={{ x:10, y:10 }}\n                  startPosition={point.pos}\n                  outputs={point.outputs}\n                  onClick={(e) => {\n                    this.handleClickPoint(key, e);\n                  }}\n                  onDrag={pos => {\n                    var flowpoints = this.state.flowpoints;\n                    flowpoints[key].pos = pos;\n                    this.setState({ flowpoints, lastPos:pos })\n                  }}\n                  style={{\n                    height:'auto',\n                    maxHeight: this.state.settings.showShape ? 150 : 50\n                  }}>\n                  <div style={{height:'auto'}}>\n                    <div style={{display:'table', width:'100%', height:'50px'}}>\n                      <div style={{display:'table-cell', verticalAlign:'middle', textAlign:'center'}}>\n                        {\n                          this.state.settings.showName ? (point.name !== '' ? point.name : ('p_' + key)) : point.specs.title\n                        }\n                      </div>\n                    </div>\n                    {\n                      this.state.settings.showShape ? shapeBox(point.output_shape) : null\n                    }\n                  </div>\n                </Flowpoint>\n              )\n            })\n          }\n        </Flowspace>\n\n        <div style={{\n            bottom:'5px',\n            left:this.state.settings.drawerWidth * this.state.settings.showSidebar + 5 + 'px',\n            position:'fixed',\n            transition: 'left 0.4s ease-out'\n          }}>\n          <div style={{paddingBottom:4}}>\n            <Fab\n              style={{background:lightBlue['A400'], color:'#ffffff', zIndex:6, boxShadow:'none'}}\n              aria-label=\"Add\"\n              onClick={() => {this.addFlowpoint()}}>\n              <AddIcon />\n            </Fab>\n          </div>\n          <div style={{paddingBottom:4}}>\n            <Fab\n              style={{background:blue['A400'], color:'#ffffff', zIndex:6, boxShadow:'none'}}\n              aria-label=\"Copy code\"\n              onClick={() => {\n                copy(this.state.code)\n                var settings = this.state.settings;\n                settings.snackshow = true;\n                settings.snackmsg = 'Copied code to clipboard';\n                settings.snackcolor = blue['A400'];\n                this.setState({settings})\n              }}>\n              <FileCopyIcon />\n            </Fab>\n          </div>\n          <div style={{paddingBottom:4}}>\n            <Fab\n              style={{background:indigo['A400'], color:'#ffffff', zIndex:6, boxShadow:'none'}}\n              aria-label=\"Copy code\"\n              onClick={() => {\n                var new_url = parseToQuery(\n                  this.state.flowpoints,\n                  this.state.settings.theme,\n                  this.state.settings.variant,\n                  this.state.settings.background,\n                  this.state.count,\n                  this.state.settings.darktheme,\n                  this.state.settings.showName,\n                  this.state.environment.library,\n                  this.state.settings.showSidebar\n                )\n                new_url = ReplaceAll(new_url, '.', 'lll')\n                postToDB(new_url, (mod_id) => {\n                  new_url = this.baseUrl + '?p=' + mod_id;\n                  copy(new_url)\n                  var settings = this.state.settings;\n                  settings.snackshow = true;\n                  settings.snackmsg = 'Copied link to clipboard';\n                  settings.snackcolor = indigo['A400'];\n                  settings.modelUrl = new_url\n                  this.setState({settings})\n                })\n              }}>\n              <LinkIcon />\n            </Fab>\n          </div>\n          <div>\n            <Fab\n              style={{background:deepPurple['A400'], color:'#ffffff', zIndex:6, boxShadow:'none'}}\n              aria-label=\"Hide/Show\"\n              onClick={() => {\n                var settings = this.state.settings;\n                settings.showSidebar = !settings.showSidebar;\n                this.setState({settings})\n              }}>\n              <MenuIcon />\n            </Fab>\n          </div>\n        </div>\n\n        <Snackbar\n          autoHideDuration={3000}\n          onClose={() => {\n            var settings = this.state.settings;\n            settings.snackshow = false\n            this.setState({ settings })\n          }}\n          anchorOrigin={{vertical: 'bottom', horizontal: 'right'}}\n          open={this.state.settings.snackshow}>\n          <SnackbarContent\n            message={this.state.settings.snackmsg}\n            style={{backgroundColor:this.state.settings.snackcolor, color:'black'}}/>\n        </Snackbar>\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}